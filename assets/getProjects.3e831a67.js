import{Q as k,a as V}from"./QCard.007802bc.js";import{Q as $,a as D}from"./QItem.1f64f57d.js";import{g as E,Q as A,a as F}from"./getProject.2508b1b9.js";import{_ as G,r as o,G as a,V as d,K as l,W as h,X as x,J as _,I as u,Y as m,L as b,Z as j,P as q,H as C,a0 as I,N as H,O as J}from"./index.579bc2f3.js";import{s as K}from"./supabaseClient.3b45c6a7.js";const z=r=>(H("data-v-62e87e10"),r=r(),J(),r),O={class:"row justify-center q-gutter-lg"},T={class:"flip-card row justify-center q-gutter-md text-center items-center"},U={class:"",style:{"text-align":"center"}},W=["src"],X={class:"text-white full-width q-py-md",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -100%)",background:"rgba(0, 0, 0, .5)"}},Z={key:0,class:"row justify-center",style:{"margin-top":"40px"}},M={style:{"overflow-y":"auto",height:"55%",padding:"4px",margin:"2px","box-sizing":"border-box","text-align":"justify"}},R={style:{"box-sizing":"border-box",wrap:"auto"}},ee={key:0,style:{}},te=z(()=>l("b",null,"Participants from:",-1)),se=z(()=>l("br",null,null,-1)),ae={key:0,class:"q-mx-auto q-pt-md",style:{width:"600px"}},le={__name:"ProjectsCard",props:{projects:{type:Array,default:()=>[]}},setup(r){const c=r,p=o(),{data:w,dataLoaded:y,load:f,firstPic:B}=E(),N=async e=>{await f(e),y&&(p.value=B.value)};console.log(c.projects,"ProjectCard - props");const v=o([]),P=o(),n=o(!1),Q=o(!1),g=o(!1);for(let e=0;e<c.projects.length;e++)v.value.includes(c.projects[e].year)||v.value.push(c.projects[e].year);v.value.sort(function(e,t){return t-e});const S=e=>c.projects.filter(t=>t.year===e);console.log(S(2150));const L=e=>v.value.filter(t=>t===e);return document.onkeydown=e=>{e.keyCode===27&&(g.value=!1)},(e,t)=>(a(),d(h,null,[l("div",O,[l("div",T,[(a(!0),d(h,null,x(v.value,s=>(a(),C(V,{key:s,class:I(["flip-card-inner col-4",{flipped:Q.value}]),style:{},onClick:i=>{Q.value=!0,P.value=s,v.value=L(P.value)}},{default:u(()=>[_(k,{class:"flip-card-front q-pa-none"},{default:u(()=>[l("div",U,[l("img",{src:"/projectPic/natureProject.jpg",class:"",style:{width:"100%",height:"450px","background-size":"cover"},height:""},null,8,W),l("h2",X,m(s),1)])]),_:2},1024),_(k,{class:"flip-card-back column justify-center"},{default:u(()=>[(a(!0),d(h,null,x(S(s),i=>(a(),C($,{key:i.id,clickable:"",class:I(["",{active:i===n.value}]),style:{},"active-class":"text-white",onClick:Y=>{n.value=i,console.log("clicked"+i.id)}},{default:u(()=>[_(D,{class:"",style:{height:"60px"},onClick:Y=>N(i.name)},{default:u(()=>[b(m(i.name),1)]),_:2},1032,["onClick"])]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),n.value?(a(),d("div",Z,[_(V,{class:"col-4 justify-center",style:{}},{default:u(()=>[_(k,{class:"text-center",style:{height:"100%"}},{default:u(()=>[l("h6",null,m(n.value.name),1),l("div",M,[l("p",R,m(n.value.projectDescription),1),n.value.countries?(a(),d("p",ee,[te,b(),se,b(" "+m(n.value.countries),1)])):j("",!0)])]),_:1})]),_:1})])):j("",!0)]),q(y)&&n.value?(a(),d("div",ae,[_(F,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),swipeable:"",animated:"",arrows:"",thumbnails:"",infinite:"",fullscreen:g.value,style:{"border-radius":"25px"}},{default:u(()=>[(a(!0),d(h,null,x(q(w)[0].photos,s=>(a(),C(A,{key:s,name:s,"img-src":s,style:{"background-size":"contain","background-repeat":"no-repeat","background-color":"#4a5859"},onClick:t[0]||(t[0]=i=>g.value=!g.value)},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen"])])):j("",!0)],64))}};var ue=G(le,[["__scopeId","data-v-62e87e10"]]);const de=()=>{const r=o(null),c=o(null),p=o(!1);return{error:c,documents:r,load:async y=>{try{const{data:f}=await K.from("projects").select().eq("category",y);if(!f)throw Error("no data available");r.value=f,p.value=!0}catch(f){c.value=f.message}},dataLoaded:p}};export{ue as P,de as g};
